# 🧩 Problem 18: Replace Bit Field in a 32-bit Register

### 📝 Problem Statement

Write a **C program** to **replace a specific sequence of bits** in a **32-bit register** with a new value. The replacement should start at a given bit position and cover a given length.

The program should:

* Take **four inputs**:

  * `reg` → a 32-bit unsigned integer representing the register value
  * `val` → the new value to insert into the register
  * `pos` → the starting bit position (0-based index, 0 = LSB)
  * `len` → the number of bits to replace
* Replace the `len` bits starting from position `pos` in `reg` with the bits from `val`
* **Preserve all other bits** in `reg`
* Print the **updated register** value

---

### ✅ Examples

#### Example 1

```
Input:
reg = 0b11111111
val = 0b0000
pos = 4
len = 4

Output:
0b00001111
```

**Explanation**:

```
Bits 4 to 7 are replaced with 0b0000, while bits 0 to 3 stay the same.
```

---

#### Example 2

```
Input:
reg = 0b00001111
val = 0b10
pos = 1
len = 2

Output:
0b00001101
```

**Explanation**:

```
Bits 1 and 2 (from LSB) are replaced by 0b10 (which is '10' in binary).
```

---

### 💡 Hint

To replace bits without disturbing others:

1. **Clear** the target bits in `reg` using a mask:

   ```c
   ~(((1U << len) - 1) << pos)
   ```
2. **Insert** the new value in the cleared position:

   ```c
   val << pos
   ```
3. **Combine** both using bitwise OR:

   ```c
   (reg & ~(((1U << len) - 1) << pos)) | (val << pos)
   ```

> ⚠️ Ensure that `val` does not contain more than `len` bits — otherwise it will overwrite unintended bits.

---

### 💻 Solution (C)

```c
#include <stdio.h>
#include <stdint.h>

uint32_t replace_field(uint32_t reg, uint32_t val, uint8_t pos, uint8_t len) {
    return (reg & ~(((1U << len) -1 ) << pos)) | (val << pos);
}

int main() {
    uint32_t reg, val;
    uint8_t pos, len;
    scanf("%u %u %hhu %hhu", &reg, &val, &pos, &len);
    printf("%u", replace_field(reg, val, pos, len));
    return 0;
}
```